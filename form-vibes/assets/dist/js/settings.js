import{L as R,x as k,c as H,o as i,g as h,k as e,W as I,X as G,t as C,s as E,q as _,E as V,l as n,ai as F,aj as K,h as t,w as o,ak as D,ab as L,O as Q,P as M,J as O,al as W,am as X,Q as B,A as Y,aa as z,an as j,ao as T,a4 as Z,ap as ee,aq as te,ad as ne,ae as oe,af as ae}from"../assets/post-2433f428.js";import{u as N,E as le}from"../assets/formvibes-4c4994e4.js";import{E as se,a as ie}from"../assets/tab-pane-95a99d05.js";import{_ as re}from"../assets/header-7033ae65.js";import{E as J}from"../assets/switch-6d25050e.js";import{E as $}from"../assets/index-8e3cc18a.js";import{E as ce,a as ue}from"../assets/collapse-item-ac72ec57.js";import{E as P}from"../assets/index-2f3cc352.js";/* empty css                      */import"../assets/vnode-5543c613.js";import"../assets/index-fb3a1e53.js";const de=(b,l)=>{const v=b.__vccOpts||b;for(const[r,a]of l)v[r]=a;return v},pe=b=>(W("data-v-48be8a7e"),b=b(),X(),b),_e={key:0},ve={key:1},me=pe(()=>e("span",null,"( In seconds )",-1)),fe={__name:"settings-content",setup(b){const{settings_default:l,settings_saved:v}=window.fvGlobalVar,r=N(),{isSaving:a}=R(r),s=k([]),c=k([]);s.value=Object.entries(l).map(([m,p])=>({label:p.label,type:p.type,value:v[m],setting:m})),c.value=JSON.parse(JSON.stringify(s.value));const u=H(()=>s.value.some((m,p)=>m.value!==c.value[p].value)),d=()=>{const m={...v};s.value.forEach(({setting:p,value:g})=>{m[p]=g}),r.saveSettings(m),c.value=JSON.parse(JSON.stringify(s.value))},y=()=>{r.resetSettings(),setTimeout(()=>{window.location.reload()},1e3)};return(m,p)=>{const g=J,S=M,w=O,A=$;return i(),h("div",null,[e("div",null,[e("ul",null,[(i(!0),h(I,null,G(s.value,(f,x)=>(i(),h("li",{key:x},[e("div",null,[f.type!=="input"?(i(),h("p",_e,C(f.label),1)):E("",!0),f.type==="input"&&s.value.filter(U=>U.setting==="auto_refresh")[0]?.value?(i(),h("p",ve,[_(C(f.label)+" ",1),me])):E("",!0)]),e("div",null,[f.type==="toggle"?(i(),V(g,{key:0,modelValue:f.value,"onUpdate:modelValue":U=>f.value=U,style:{"margin-left":"24px"},"inline-prompt":"","active-icon":n(F),"inactive-icon":n(K)},null,8,["modelValue","onUpdate:modelValue","active-icon","inactive-icon"])):E("",!0),f.type==="input"&&s.value.filter(U=>U.setting==="auto_refresh")[0]?.value?(i(),V(S,{key:1,modelValue:f.value,"onUpdate:modelValue":U=>f.value=U,"inline-prompt":""},null,8,["modelValue","onUpdate:modelValue"])):E("",!0)])]))),128))]),e("div",null,[t(A,{type:"primary",class:"fv-save-button",disabled:!u.value||n(a),onClick:d},{default:o(()=>[n(a)?(i(),V(w,{key:1,class:"is-loading"},{default:o(()=>[t(n(L))]),_:1})):(i(),V(w,{key:0},{default:o(()=>[t(n(D))]),_:1})),_(" Save Setting ")]),_:1},8,["disabled"]),t(A,{type:"danger",class:"fv-reset-button",icon:n(Q),plain:"",onClick:y},{default:o(()=>[_(" Reset ")]),_:1},8,["icon"])])])])}}},he=de(fe,[["__scopeId","data-v-48be8a7e"]]),be={class:"fv-feature-heading"},ge={__name:"role-content",props:["role","roleKey","setCap","caps"],setup(b){const l=b,v=k([]);B(()=>{const a=l.role.capabilities,{capabilities:s}=window.fv_role_manager_data,c={};Object.keys(s).forEach(u=>{c[u]={},Object.keys(s[u]).forEach(d=>{c[u][d]={label:s[u][d],enabled:a[d]??!1}})}),v.value=c});const r=(a,s,c)=>{l.setCap({...l.caps,[c]:{...l.caps[c],[s]:a}})};return(a,s)=>{const c=J;return i(),h("div",null,[e("div",null,[e("div",null,[(i(!0),h(I,null,G(v.value,(u,d,y)=>(i(),h("div",{key:y},[e("span",be,C(d.charAt(0).toUpperCase()+d.substring(1)),1),e("ul",null,[(i(!0),h(I,null,G(u,(m,p,g)=>(i(),h("li",{key:g},[e("div",null,[t(c,{modelValue:m.enabled,"onUpdate:modelValue":S=>m.enabled=S,style:{"margin-left":"24px","margin-right":"15px"},"inline-prompt":"","active-icon":a.Check,"inactive-icon":a.Close,onChange:S=>r(S,p,b.roleKey)},null,8,["modelValue","onUpdate:modelValue","active-icon","inactive-icon","onChange"]),e("span",null,C(m.label),1)])]))),128))])]))),128))])])])}}},ye={__name:"role-manager",setup(b){const l=N(),{isSaving:v}=R(l),r=k({});k(window.fv_role_manager_data.roles);const a=k(window.fv_role_manager_data.roles),s=k([]);Y(()=>{a.value=Object.fromEntries(Object.entries(a.value).filter(([d,y])=>d!=="administrator"))});const c=d=>{r.value=d},u=()=>{l.saveRoles(r.value)};return(d,y)=>{const m=ce,p=ue,g=O,S=$;return i(),h("div",null,[t(p,{modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=w=>s.value=w)},{default:o(()=>[(i(!0),h(I,null,G(a.value,(w,A,f)=>(i(),V(m,{title:w.name,key:f},{title:o(()=>[e("h4",null,C(w.name),1)]),default:o(()=>[t(ge,{roleKey:A,role:a.value[A],setCap:c,caps:r.value},null,8,["roleKey","role","caps"])]),_:2},1032,["title"]))),128))]),_:1},8,["modelValue"]),t(S,{onClick:u,type:"primary",class:"fv-save-button"},{default:o(()=>[n(v)?(i(),V(g,{key:0},{default:o(()=>[t(n(L))]),_:1})):E("",!0),_(" Save Settings ")]),_:1})])}}},we={class:"fv-gsheet-wrapper"},ke={class:"fv-gsheet-controls"},Ce={class:"fv-gsheet-control-wrapper gsheet-status"},Se={class:""},Ve={class:"fv-gsheet-control-wrapper"},Ee={class:"fv-gsheet-control-wrapper"},Ae={class:"fv-gsheet-description"},Ue={style:{"margin-left":"1em"}},xe=T('<li> Go to <a target="_blank" rel="noopener noreferrer" href="https://console.developers.google.com/"> Google Developer Console </a> and create a <b>New Project</b>. </li><li> Now select the newly created project from the projects dropdown. </li><li>From the left sidebar, go to API &amp; Services -&gt; Library.</li><li> Search for <b>Google Sheets API</b> and <b>Google Drive API</b>, open each one, and click Enable to turn them on. </li><li> On the left menu, select <b>OAuth Consent Screen</b> and then click <b>Get Started</b>. </li><li> Add your <b>App name</b> and Support email, then click Next. Choose <b>External</b> as the audience. </li><li> Add your <b>Contact info</b>, agree to the terms, and click <b>Create</b>. </li><li>On the left menu, click <b>Branding</b>, scroll down to <b>Authorized Domains</b>, and click <b>Add Domain.</b></li>',8),Ne=e("b",null,"Authorized domain.",-1),Ie=T("<li> Go to the Audience menu in the sidebar and click <b>Publish App.</b></li><li> Now, go to the client option in the side menu and click on <b>Create Client</b> button. </li><li>Choose your <b>App type</b> and enter a name.</li><li> Now go to <b>Authorised redirect URIs</b> and click <b>Add URI</b> . </li>",4),Ge=e("b",null,"Authorized redirect URIs",-1),Oe=e("b",null,"Create",-1),Pe=e("br",null,null,-1),Re=e("span",{class:"fv-gsheet-note"}," Note: It may take five minutes to a few hours for settings to take effect. ",-1),Te=T('<li> Copy <b>Client ID</b> and <b>Client Secret</b> from newly created app and put them in their respective fields(on the left). </li><li> Click <b>Authenticate</b>, if appears <b>App is not verified</b> error click <b>show advanced</b> and then <b>Go to App</b>. <br><span class="fv-ghseet-note"> Note: Please check all the required scopes(permissions) when you Authenticate. </span></li>',2),$e={key:0},ze=e("h3",null,"Re Authenticate?",-1),je=e("span",null,[_(" Try re-authorizing if you face issues. Go to "),e("a",{target:"_blank",rel:"noopener noreferrer",href:"https://myaccount.google.com/permissions"},[e("b",null,"Google App Permissions")]),_(" and hit "),e("b",null,"REMOVE ACCESS"),_(" on any previous authorization of this app. Now click on the "),e("b",null,"Re Authenticate"),_(" button and finish the authorization process again. ")],-1),De=[ze,je],Le={__name:"gsheet",setup(b){N();const l=window.fvGlobalVar?.i18n,v=k(window.fvGlobalVar?.is_authenticated||!1),r=k(window.fvGlobalVar?.client_id||""),a=k(window.fvGlobalVar?.client_secret||""),s=k(!1),c=window?.fvGlobalVar?.tld||window?.fvGlobalVar?.domain?.host;let u=window?.fvGlobalVar.rest_url;u=u+"form-vibes/googlesheets";const d=async()=>{s.value=!0;try{const{data:p}=await Z({queryParams:{client_id:r.value,client_secret:a.value},action:"fv_google_sheet_authenticate"});if(p.success){const g=p.data;window.location.href=g}}catch(p){console.log("error",p.message)}finally{s.value=!1}},y=()=>{navigator.clipboard.writeText(u),P({offset:30,type:"success",dangerouslyUseHTMLString:!0,message:"<strong>URI copied to clipboard</strong>"})},m=()=>{navigator.clipboard.writeText(c),P({offset:30,dangerouslyUseHTMLString:!0,message:"<strong>Host name copied to clipboard</strong>",type:"success"})};return(p,g)=>{const S=le,w=M,A=$,f=O;return i(),h("div",null,[e("div",we,[e("div",ke,[e("div",Ce,[e("span",Se,C(n(l)?.status),1),t(S,{class:"box-item",type:v.value?"success":"danger",effect:"light"},{default:o(()=>[_(C(v.value?"Connected":"Not Connected"),1)]),_:1},8,["type"])]),e("div",Ve,[e("span",null,C(n(l)?.client_id),1),e("div",null,[t(w,{modelValue:r.value,"onUpdate:modelValue":g[0]||(g[0]=x=>r.value=x),placeholder:"Enter a client ID"},null,8,["modelValue"])])]),e("div",Ee,[e("span",null,C(n(l)?.client_secret),1),e("div",null,[t(w,{modelValue:a.value,"onUpdate:modelValue":g[1]||(g[1]=x=>a.value=x),placeholder:"Enter a client secret"},null,8,["modelValue"])])]),e("div",null,[t(A,{type:"primary",onClick:d,class:"fv-save-button"},{default:o(()=>[_(C(s.value?n(l)?.authenticating:v.value?n(l)?.re_authenticate:n(l)?.authenticate),1)]),_:1})])]),e("div",Ae,[e("h3",null,C(n(l)?.instructions),1),e("ol",Ue,[xe,e("li",null,[_(" Copy the URL "),e("b",null,[t(w,{readonly:"",style:{"background-color":"transparent",width:"240px"},value:n(c),size:"small",class:"fv-googlesheet-input"},{suffix:o(()=>[t(f,{onClick:z(m,["stop"]),size:"18"},{default:o(()=>[t(n(j))]),_:1})]),_:1},8,["value"])]),_(" and paste it in the "),Ne]),Ie,e("li",null,[_(" Paste this URL "),e("b",null,[e("i",null,[t(w,{readonly:"",style:{"background-color":"transparent",width:"450px"},value:`${n(u)}`,size:"small",class:"fv-gsheet-input"},{suffix:o(()=>[t(f,{onClick:z(y,["stop"]),size:"18"},{default:o(()=>[t(n(j))]),_:1})]),_:1},8,["value"])])]),_(" in "),Ge,_(", click "),Oe,_(". "),Pe,Re]),Te]),v.value?(i(),h("div",$e,De)):E("",!0)])])])}}},Me={class:"fv-settings-wrapper fv-pr-5"},Be={__name:"settings",setup(b){const l=k(window.location.hash.replace("#","")||"settings"),v=N(),{notice:r,isPro:a}=R(v),s=(c,u)=>{window.location.hash=c};return B([r],()=>{P({offset:30,dangerouslyUseHTMLString:!0,message:`<strong>${r.value.message}</strong>`,type:r.value.isError?"error":"success",class:"fv-items-center"})}),(c,u)=>{const d=O,y=se,m=ie;return i(),h("div",null,[t(re),e("div",Me,[t(m,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=p=>l.value=p),type:"card",class:"fv-settings-tab",onTabChange:s},{default:o(()=>[t(y,{name:"settings"},{label:o(()=>[t(d,null,{default:o(()=>[t(n(D))]),_:1}),_(" Settings ")]),default:o(()=>[t(he)]),_:1}),n(a)?(i(),V(y,{key:0,name:"rolemanager"},{label:o(()=>[t(d,null,{default:o(()=>[t(n(ee))]),_:1}),_(" Role Manager ")]),default:o(()=>[t(ye)]),_:1})):E("",!0),n(a)?(i(),V(y,{key:1,name:"gsheet"},{label:o(()=>[t(d,null,{default:o(()=>[t(n(te))]),_:1}),_(" Google Sheet ")]),default:o(()=>[t(Le)]),_:1})):E("",!0)]),_:1},8,["modelValue"])])])}}},Je={__name:"settings",setup(b){const l=N();return(v,r)=>{const a=ne;return i(),V(a,null,{default:o(()=>[e("div",null,[t(Be,{store:n(l)},null,8,["store"])])]),_:1})}}};const qe=oe(),q=ae(Je);q.use(qe);q.mount("#fv-settings-general");
//# sourceMappingURL=settings.js.map
